Script
======

Скрипты в InfinniUI - это js-функции, с заданной прикладными
разработчиками логикой. С помощью них прикладные разработчики могут
реализовывать в приложениях произвольную логику. Скрипты имеют
зафиксированные входные параметры (их два: контекст и аргументы).

Скрипты могут быть прикреплены к `представлению <../Elements/View/>`__ в
формате

.. code:: js

    {
        name: 'ИмяСкрипта',
        func: someScriptInstance
    }

В этом случае, скрипт попадет в список скриптов представления и станет
доступен там по заданному имени.

В основном, скрипты задаются и используются на уровне метаданных. Там их
можно задавать двумя способами. Первый - в разделе Scripts в метаданных
представления. В этом случае они прикрепляются к этому представлению под
заданным именем. Пример: зададим скрипт ``alertAction``, который при
вызове будет выводить сообщение на экране. Объявим этот скрипт
обработчиком события нажатия на кнопку.

.. code:: js

    //infinni-ui-demo
    {
        "DataSources": [
        ],

        "Items": [{
            "GridPanel": {
                "Items": [{
                    "Cell": {
                        "ColumnSpan": 4,
                        "Items": [{
                            "Button": {
                                "Name": "button",
                                "Text": "Button",
                                "OnClick": "alertAction"
                            }
                        }]
                    }
                }]
            }
        }],

        "Scripts": [{
            "Name": "alertAction",
            "Body": "alert(args.source.getName());"
        }]
    }

Второй способ - более короткий. Если скрипт предполагается использовать
только в одном месте, то его тело можно задать непосредственно в
объявлении обработчика, без регистрации на представлении:

.. code:: js

    //infinni-ui-demo
    {
        "DataSources": [
        ],

        "Items": [{
            "GridPanel": {
                "Items": [{
                    "Cell": {
                        "ColumnSpan": 4,
                        "Items": [{
                            "Button": {
                                "Name": "button",
                                "Text": "Button",
                                "OnClick": "{ alert(args.source.getName()); }"
                            }
                        }]
                    }
                }]
            }
        }]
    }

Как вы возможно уже заметили, для такого типа задания скрипта, его
содержимое помещается в фигурные скобки.


.. toctree::

   ScriptBuilder/index.rst
   Script.metadata.rst
