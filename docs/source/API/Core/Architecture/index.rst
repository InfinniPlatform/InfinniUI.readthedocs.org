Архитектура
===========

Самые крупные блоки в архитектуре infinniUI это источники данных и набор
элементов пользовательского интерфейса. Эти два блока абсолютно
независимы.

Источники данных
----------------

Источни данных отвечают за данные, которые они могут получать из разных
источников - различных удаленных сервисов, а так же прикладной логики.
Источники предаставляют CRUD к данным, за которые они отвечают, а так же
позволяют подписываться на изменение этих данных.

Элменты пользовательского интерфейса
------------------------------------

Каждый элемент отвечают за такие объекты пользовательского интерфейса
как кнопка, поле ввода, лейбл, различные контейнерные элементы (например
панели) и т. д..

Связывание источников данных и элементов интерфейса. Метаданные.
----------------------------------------------------------------

Связывание происходит автоматически, на основе заданных прикладным
разработчиком метаданных. Метаданные представляют из себя JSON-документ,
в котором описывается структура интерфейса, перечень источников данных,
а так же привязки данных к элементам интерфейса.

Структура интерфейса описывается таким образом:

::

    "GridPanel": {
        "Items": [
            {
                "Cell": {
                    "ColumnSpan": 4,
                    "Items": [
                        {
                            "Label": {
                                "Text": "Some label",
                                "HorizontalAlignment": "Right"
                            }
                        }
                    ]
                }
            },{
                  "Cell": {
                      "ColumnSpan": 4,
                      "Items": [
                          {
                              "TextBox": {
                                  "Name": "TB",
                                  "Value": "Some value"
                              }
                          }
                      ]
                  }
              }
        ]
    }

Источник данных (в данном примере локальный - с заранее определенным
набором данных) задается следующим образом:

.. code:: js

    {
        "DataSources": [{
            "ObjectDataSource": {
                "Name": "MainDataSource",
                "Items":[{
                    "someField": "value"
                }]
            }
        }]
    }

Привязка данных к нашему текстовому полю:

.. code:: js

    //infinni-ui-demo
    {
        "DataSources": [{
            "ObjectDataSource": {
                "Name": "MainDataSource",
                "Items":[{
                    "someField": "value"
                }]
            }
        }],

        "Items": [{

            "GridPanel": {
                "Items": [
                    {
                        "Cell": {
                            "ColumnSpan": 4,
                            "Items": [
                                {
                                    "Label": {
                                        "Text": "Some label",
                                        "HorizontalAlignment": "Right"
                                    }
                                }
                            ]
                        }
                    },{
                        "Cell": {
                            "ColumnSpan": 4,
                                "Items": [
                                {
                                    "TextBox": {
                                        "Name": "TB",
                                        "Value": {
                                            "Source": "MainDataSource",
                                            "Property": "$.someField"
                                        }
                                    }
                                }
                            ]
                        }
                     }
                ]
            }
        }]
    }

Построением интерфейсов по конкретным метаданным занимаются билдеры.
Таким образом, процесс работы Infinni UI получается следующий:

-  В Infinni UI передаются метаданные.
-  Infinni UI передает метаданные билдерам.
-  По инструкциям из метаданных, билдеры строят web-интерфейс, создают
   источники данных и связывают интерфейс с данными.
